{
    "targets": [{
        "target_name": "binding",
        "include_dirs": ["<!(node -e \"require('nan')\")"],
        "conditions": [
            ['OS=="mac"',
                {
                    "sources": [
                        "src/clip_osx.h",
                        "src/clip_osx.mm"
                    ],
                    'defines': [
                        '__MACOSX_CORE__',
                        '__MAC__'
                    ],
                    'link_settings': {
                        'libraries': [
                            '-framework Cocoa',
                            '-framework CoreFoundation',
                        ]
                    },
                    'xcode_settings': {
                        'GCC_ENABLE_CPP_EXCEPTIONS': 'YES',
                        'OTHER_CFLAGS': [
                            '-ObjC++',
                            '-std=c++11'
                        ]
                    }
                }
            ],
            ['OS=="win"',
                {
                    "sources": [
                        "src/clip_win.h",
                        "src/clip_win.cc"
                    ],
                    'defines': [
                        '__WIN32__'
                    ]
                }
            ],
            ['OS=="linux"',
                {
                    "sources": [
                        "src/clip_linux.h",
                        "src/clip_linux.cc"
                    ],
                    'defines': [
                        '__unix__'
                    ]
                }
            ]
        ]
    }, {
        "target_name": "action_after_build",
        "type": "none",
        "dependencies": ["<(module_name)"],
        "copies": [{
            "files": ["<(PRODUCT_DIR)/<(module_name).node"],
            "destination": "<(module_path)"
        }]
    }]
}
